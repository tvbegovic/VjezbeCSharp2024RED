(self.webpackChunkgameshop_app=self.webpackChunkgameshop_app||[]).push([[179],{8255:f=>{function h(g){return Promise.resolve().then(()=>{var Z=new Error("Cannot find module '"+g+"'");throw Z.code="MODULE_NOT_FOUND",Z})}h.keys=()=>[],h.resolve=h,h.id=8255,f.exports=h},6561:(f,h,g)=>{"use strict";var Z=g(9075),e=g(3018),u=g(9062),m=g(8583);let q=(()=>{class n{constructor(){this.items=[],this.Changed=new e.vpe,this.load()}add(t){const r=this.items.find(i=>i.game.id==t.id);r?r.qty++:this.items.push({game:t,qty:1}),this.save(),this.Changed.emit(this.getCount())}remove(t,r){r||(r=1);const i=this.items.findIndex(s=>s.game.id==t);if(i>=0){const s=this.items[i];s.qty-=r,s.qty<=0&&this.items.splice(i,1),this.save(),this.Changed.emit(this.getCount())}}load(){const t=localStorage.getItem("cart");t&&(this.items=JSON.parse(t),this.Changed.emit(this.getCount()))}clear(){this.items=[],this.save(),this.Changed.emit(this.getCount())}getCount(){return this.items.length}save(){localStorage.setItem("cart",JSON.stringify(this.items))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),G=(()=>{class n{constructor(t){this.cartService=t,this.count=0,t.Changed.subscribe(r=>this.count=r)}ngOnInit(){this.count=this.cartService.getCount()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cart-indicator"]],decls:6,vars:2,consts:[[1,"d-flex"],[1,"holder"],[3,"routerLink"],["src","assets/cart.png",2,"width","64px"],[1,"counter"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("routerLink","cart"),e.xp6(3),e.Oqu(r.count))},directives:[u.yS],styles:[".holder[_ngcontent-%COMP%]{position:relative}.counter[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;font-weight:bold}"]}),n})(),C=(()=>{class n{}return n.accessTokenKey="access_token",n.refreshTokenKey="refresh_token",n})();var M=g(1841),b=g(3342);let J=(()=>{class n{constructor(){this.blockUIEvent=new e.vpe}startBlock(){setTimeout(()=>this.blockUIEvent.emit(!0),0)}stopBlock(){setTimeout(()=>this.blockUIEvent.emit(!1),0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),A=(()=>{class n{constructor(t,r){this.http=t,this.blockUIService=r}post(t,r){return this.blockUIService.startBlock(),this.http.post(t,r).pipe((0,b.b)(()=>this.blockUIService.stopBlock(),()=>this.blockUIService.stopBlock()))}postNoBlock(t,r){return this.http.post(t,r)}get(t,r){return this.blockUIService.startBlock(),null==r&&(r={}),this.http.get(t,r).pipe((0,b.b)(()=>this.blockUIService.stopBlock(),()=>this.blockUIService.stopBlock()))}getNoBlock(t,r){return null==r&&(r={}),this.http.get(t,r)}put(t,r){return this.blockUIService.startBlock(),this.http.put(t,r).pipe((0,b.b)(()=>this.blockUIService.stopBlock(),()=>this.blockUIService.stopBlock()))}putNoBlock(t,r){return this.http.put(t,r)}BuildHeaders(){let t=new M.WM;if(t=t.append("Content-Type","application/json; charset=utf-8"),t=t.append("Accept","q=0.8;application/json;q=0.9"),"undefined"!=typeof Storage){const r=localStorage.getItem(C.accessTokenKey);null!=r&&(t=t.append("Authorization","Bearer "+r))}return t}delete(t,r){return null==r&&(r={}),this.http.delete(t,r)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.eN),e.LFG(J))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),v=(()=>{class n{constructor(t){this.httpService=t,this.api="api/user/",this.userSetEvent=new e.vpe,this.userKey="gameshop_user"}get User(){return null==this._user&&(this._user=this.loadUser()),this._user}login(t,r){return this.httpService.get(this.api+"login",{params:{email:t,password:r}})}logout(){return this.httpService.post(this.api+"logout",null)}loadUser(){const t=localStorage.getItem(this.userKey);return null!=t?JSON.parse(t):null}saveUser(t){localStorage.setItem(this.userKey,JSON.stringify(this._user)),this._user=t}saveLoginData(t){this._user=t.user,localStorage.setItem(this.userKey,JSON.stringify(this._user)),localStorage.setItem(C.accessTokenKey,t.accessToken),localStorage.setItem(C.refreshTokenKey,t.refreshToken),this.userSetEvent.emit(t.user)}clearUser(){localStorage.removeItem(this.userKey),localStorage.removeItem(C.accessTokenKey),localStorage.removeItem(C.refreshTokenKey),this._user=null,this.userSetEvent.emit(null)}updateUser(t){return t.id>0?this.httpService.put(`${this.api}`,t):this.httpService.post(`${this.api}`,t)}deleteUser(t){return this.httpService.delete(this.api+"delete?id="+t)}registerUser(t){return this.httpService.post(`${this.api}register`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),_=(()=>{class n{constructor(t){this.httpService=t}getError(t){return t.error instanceof Error?t.error.message:"string"==typeof t.error?t.error:t.message}deepClone(t){return JSON.parse(JSON.stringify(t))}getUploadUrl(){return"api/uploadImage"}getUploadFileUrl(){return"api/uploadFile"}getTempUrl(){return"api/getTempUrl"}uploadFile(t,r){const i=new FormData;return i.append("file",r,r.name),this.httpService.post(t,i)}getSetting(t){return this.httpService.get("api/getSetting",{params:{name:t}})}padValue(t,r=2){return t.toString().padStart(r,"0")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var I=g(5898),c=g(665);function L(n,o){1&n&&(e.TgZ(0,"a",6),e._UZ(1,"img",7),e.qZA()),2&n&&e.Q6J("routerLink","userdetails")}function Q(n,o){1&n&&e._UZ(0,"img",7)}function P(n,o){if(1&n&&(e.TgZ(0,"div",8),e.TgZ(1,"a",9),e._uU(2,"Login"),e.qZA(),e.TgZ(3,"a",10),e._uU(4,"Register"),e.qZA(),e.qZA()),2&n){e.oxw();const t=e.MAs(6);e.xp6(1),e.Q6J("popover",t),e.xp6(2),e.Q6J("routerLink","register")}}function D(n,o){1&n&&(e.TgZ(0,"span"),e.TgZ(1,"a",6),e._uU(2,"Administration"),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("routerLink","admin"))}function Y(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.YNc(1,D,3,1,"span",12),e._uU(2),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().logout()}),e._uU(4,"Logout"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.user?null:t.user.admin),e.xp6(1),e.hij(" ",t.user.email," ")}}function E(n,o){if(1&n&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"div",15),e._uU(2,"Login"),e.qZA(),e.TgZ(3,"div",16),e.YNc(4,E,2,1,"div",17),e.TgZ(5,"div",18),e.TgZ(6,"label"),e._uU(7,"Email:"),e.qZA(),e.TgZ(8,"input",19),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().params.email=i}),e.qZA(),e.qZA(),e.TgZ(9,"div",18),e.TgZ(10,"label"),e._uU(11,"Password:"),e.qZA(),e.TgZ(12,"input",20),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().params.password=i}),e.qZA(),e.qZA(),e.TgZ(13,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().login()}),e._uU(14,"Login"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.errorMessage),e.xp6(4),e.Q6J("ngModel",t.params.email),e.xp6(4),e.Q6J("ngModel",t.params.password)}}let B=(()=>{class n{constructor(t,r,i){this.userService=t,this.commonService=r,this.router=i,this.errorMessage="",this.params={email:"",password:""},this.userService.userSetEvent.subscribe(s=>this.user=s)}ngOnInit(){this.user=this.userService.User}login(){this.userService.login(this.params.email,this.params.password).subscribe(t=>{this.userService.saveLoginData(t),t.user.admin&&this.router.navigate(["admin"])},t=>this.errorMessage=this.commonService.getError(t))}logout(){this.userService.clearUser(),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(_),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login-info"]],decls:7,vars:4,consts:[[1,"d-flex"],[3,"routerLink",4,"ngIf"],["src","assets/user.png","class","imguser",4,"ngIf"],["class","loginlinks",4,"ngIf"],["class","userdata",4,"ngIf"],["loginpop",""],[3,"routerLink"],["src","assets/user.png",1,"imguser"],[1,"loginlinks"],["placement","bottom",1,"btn-secondary","ml-2",2,"cursor","pointer",3,"popover"],[1,"btn-secondary","ml-2",3,"routerLink"],[1,"userdata"],[4,"ngIf"],[1,"btn","btn-sm","btn-secondary","ml-1",3,"click"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","password",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,L,2,1,"a",1),e.YNc(2,Q,1,0,"img",2),e.YNc(3,P,5,2,"div",3),e.YNc(4,Y,5,2,"div",4),e.qZA(),e.YNc(5,H,15,3,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",r.user),e.xp6(1),e.Q6J("ngIf",!r.user),e.xp6(1),e.Q6J("ngIf",!r.user),e.xp6(1),e.Q6J("ngIf",r.user))},directives:[m.O5,u.yS,I.k5,c.Fj,c.JJ,c.On],styles:[".loginlinks[_ngcontent-%COMP%], .userdata[_ngcontent-%COMP%]{font-size:.8em}.loginlinks[_ngcontent-%COMP%]{padding-top:32px}.loginlinks[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:6px}.imguser[_ngcontent-%COMP%]{width:48px;margin-top:8px}.userdata[_ngcontent-%COMP%]{padding-top:32px}.card-header[_ngcontent-%COMP%]{padding:.5rem .8rem;font-size:.8em}.card-body[_ngcontent-%COMP%]{padding:.5rem;font-size:.8em}.form-group[_ngcontent-%COMP%]{margin-bottom:.2rem}.btn-sm[_ngcontent-%COMP%]{font-size:.8rem}.alert[_ngcontent-%COMP%]{margin-bottom:.3rem}"]}),n})();function R(n,o){1&n&&e._UZ(0,"app-cart-indicator")}function z(n,o){1&n&&e._UZ(0,"app-login-info")}let T=(()=>{class n{constructor(){this.showCart=!0,this.showLoginInfo=!0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-header"]],inputs:{showCart:"showCart",showLoginInfo:"showLoginInfo"},decls:6,vars:3,consts:[[1,"d-flex","justify-content-between"],[3,"routerLink"],["src","assets/logo.png",2,"width","400px"],[1,"d-flex"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,R,1,0,"app-cart-indicator",4),e.YNc(5,z,1,0,"app-login-info",4),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("routerLink",""),e.xp6(3),e.Q6J("ngIf",r.showCart),e.xp6(1),e.Q6J("ngIf",r.showLoginInfo))},directives:[u.yS,m.O5,G,B],styles:[""]}),n})();var S=g(1793),l=g(4899);let x=(()=>{class n{constructor(t){this.httpService=t,this.api="api/game/"}getAll(){return this.httpService.get(this.api)}getHomeModel(){return this.httpService.get(this.api+"homeModel")}getGenres(){return this.httpService.get(this.api+"genres")}getCompanies(){return this.httpService.get(this.api+"companies")}getByGenre(t){return this.httpService.get(`${this.api}bygenre/${t}`)}getByCompany(t){return this.httpService.get(`${this.api}bycompany/${t}`)}search(t){return this.httpService.get(`${this.api}search/${t}`)}getById(t){return this.httpService.get(`${this.api}getById/${t}`)}getListModel(){return this.httpService.get(this.api+"listModel")}getEditModel(t){return this.httpService.get(this.api+`editModel/${t}`)}create(t){return this.httpService.post(this.api,t)}update(t){return this.httpService.put(this.api,t)}delete(t){return this.httpService.delete(this.api+t.toString())}filterByPrices(t,r){return this.httpService.get(`${this.api}filterByPrices/?from=${null!=t?t:""}&to=${null!=r?r:""}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function $(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-grid",3),e.NdJ("ButtonClicked",function(i){return e.CHM(t),e.oxw().gridButtonClicked(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("definition",t.definition)("data",t.games)("editMode",t.editMode)("editedRow",t.gameCopy)}}let k=(()=>{class n{constructor(t,r,i,s){this.gameService=t,this.commonService=r,this.messageBoxService=i,this.router=s,this.errorMessage="",this.editMode=l.Uz.NoEdit,this.editedId=0,this.definition=new l.gw([new l.C4("Id","id",l.tg.Label,"title"),new l.C4("Title","title",l.tg.Label,"title"),new l.C4("Genre","genre.name",l.tg.Label,"genre"),new l.C4("Publisher","publisher.name",l.tg.Label,"publisher"),new l.C4("Developer","developer.name",l.tg.Label,"developer"),new l.C4("Price","price",l.tg.Label,"price"),new l.C4("Release date","releaseDate",l.tg.Label,"releaseDate"),new l.C4("buttons","",l.tg.ButtonGroup,"buttons",null,void 0,void 0,null,!1,void 0,null,void 0,!1,void 0,[new l.mr("Edit","edit","fa-pencil","btn-secondary"),new l.mr("Delete","delete","fa-remove","btn-danger ml-2")])])}ngOnInit(){this.definition.getColumn("releaseDate").dataType=l.hy.Date,this.definition.getColumn("releaseDate").format={format:"dd.MM.yyyy"},this.gameService.getAll().subscribe(t=>{this.games=t,this.postSetupGrid()},t=>this.errorMessage=this.commonService.getError(t))}postSetupGrid(){}addNew(){this.router.navigate(["game/0"])}gridButtonClicked(t){"delete"===t.name?this.onDeleteRow(t.row):"edit"==t.name&&this.onEditRow(t.row)}onEditRow(t){this.router.navigate([`game/${t.id}`])}onDeleteRow(t){this.messageBoxService.openDialog("Delete game?",l.l8.Yesno).subscribe(r=>{r.value===l.gU.Ok&&(this.errorMessage="",this.gameService.delete(t.id).subscribe(i=>{const s=this.games.findIndex(a=>a.id===t.id);s>=0&&this.games.splice(s,1)},i=>this.errorMessage=this.commonService.getError(i)))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_),e.Y36(l.tn),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-games-admin-list"]],decls:5,vars:1,consts:[[1,"mt-2"],[1,"btn","btn-primary",3,"click"],[3,"definition","data","editMode","editedRow","ButtonClicked",4,"ngIf"],[3,"definition","data","editMode","editedRow","ButtonClicked"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return r.addNew()}),e._uU(2,"Add new"),e.qZA(),e.qZA(),e.TgZ(3,"div",0),e.YNc(4,$,1,4,"app-grid",2),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",r.games))},directives:[m.O5,l.Mw],styles:[""]}),n})(),X=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-home"]],decls:5,vars:1,consts:[[3,"showCart"],[1,"tabHolder"],["heading","Games"]],template:function(t,r){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"div",1),e.TgZ(2,"tabset"),e.TgZ(3,"tab",2),e._UZ(4,"app-games-admin-list"),e.qZA(),e.qZA(),e.qZA()),2&t&&e.Q6J("showCart",!1)},directives:[T,S.AH,S.wW,k],styles:[".tabHolder[_ngcontent-%COMP%]{margin-top:10px;padding:5px}"]}),n})();function j(n,o){1&n&&(e.TgZ(0,"div",26),e._uU(1," The Email field is required "),e.qZA())}function V(n,o){1&n&&(e.TgZ(0,"div",26),e._uU(1," The Password field is required "),e.qZA())}let K=(()=>{class n{constructor(t,r,i){this.userService=t,this.commonService=r,this.router=i,this.errorMessage="",this.params={username:"",password:""}}ngOnInit(){}login(){this.userService.login(this.params.username,this.params.password).subscribe(t=>{this.userService.saveLoginData(t),this.router.navigate(["admin"])},t=>this.errorMessage=this.commonService.getError(t))}checkShowValidationError(t,r){return t.invalid&&(t.dirty||t.touched||r.submitted)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(_),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:35,vars:5,consts:[[1,"main","d-flex","align-items-center"],[1,"container","mt-5"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card-group"],[1,"card","p-4"],[1,"card-body"],[3,"errorMessage"],[3,"ngSubmit"],["f","ngForm"],[1,"text-muted"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","placeholder","Email","name","username","autocomplete","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["class","validationbox",4,"ngIf"],[1,"icon-lock"],["type","password","placeholder","Password","autocomplete","current-password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"row","mt-2"],[1,"col-6"],["type","submit",1,"btn","btn-primary","px-4"],[1,"col-6","text-right"],["type","button",1,"btn","btn-link","px-0"],[1,"validationbox"]],template:function(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"main",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e._UZ(7,"app-errormessage",7),e.TgZ(8,"form",8,9),e.NdJ("ngSubmit",function(){return e.CHM(i),e.MAs(9).valid&&r.login()}),e.TgZ(10,"h1"),e._uU(11,"Login"),e.qZA(),e.TgZ(12,"p",10),e._uU(13,"Sign In to your account"),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"span",13),e._UZ(17,"i",14),e.qZA(),e.qZA(),e.TgZ(18,"input",15,16),e.NdJ("ngModelChange",function(a){return r.params.username=a}),e.qZA(),e.qZA(),e.YNc(20,j,2,0,"div",17),e.TgZ(21,"div",11),e.TgZ(22,"div",12),e.TgZ(23,"span",13),e._UZ(24,"i",18),e.qZA(),e.qZA(),e.TgZ(25,"input",19,20),e.NdJ("ngModelChange",function(a){return r.params.password=a}),e.qZA(),e.qZA(),e.YNc(27,V,2,0,"div",17),e.TgZ(28,"div",21),e.TgZ(29,"div",22),e.TgZ(30,"button",23),e._uU(31,"Login"),e.qZA(),e.qZA(),e.TgZ(32,"div",24),e.TgZ(33,"button",25),e._uU(34,"Forgot password?"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(9),s=e.MAs(19),a=e.MAs(26);e.xp6(7),e.Q6J("errorMessage",r.errorMessage),e.xp6(11),e.Q6J("ngModel",r.params.username),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(s,i)),e.xp6(5),e.Q6J("ngModel",r.params.password),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(a,i))}},directives:[l.H1,c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,m.O5],styles:[".validationbox[_ngcontent-%COMP%]{color:red}"]}),n})();var O=g(3062),W=g(3440),y=g(9745);function ee(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1,"Title is required "),e.qZA())}function te(n,o){if(1&n&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ne(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1,"Genre is required "),e.qZA())}function re(n,o){if(1&n&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function oe(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1,"Publisher is required "),e.qZA())}function ie(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1,"Price is required "),e.qZA())}function se(n,o){if(1&n&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ae(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1,"Developer is required "),e.qZA())}function ce(n,o){if(1&n&&e._UZ(0,"img",34),2&n){const t=e.oxw(2);e.Q6J("src",t.imagePreview,e.LSH)}}function le(n,o){if(1&n&&e._UZ(0,"img",34),2&n){const t=e.oxw(2);e.Q6J("src",t.getGameImage(),e.LSH)}}function pe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(1),s=e.oxw();return i.form.valid&&s.onSubmit()}),e.TgZ(2,"button",5),e._uU(3,"Save"),e.qZA(),e.TgZ(4,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().goBack()}),e._uU(5,"Go back"),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"div",8),e.TgZ(8,"div",9),e.TgZ(9,"label",10),e._uU(10,"Title"),e.qZA(),e.TgZ(11,"input",11,12),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.game.title=i}),e.qZA(),e.qZA(),e.YNc(13,ee,2,0,"div",13),e.TgZ(14,"div",9),e.TgZ(15,"label",14),e._uU(16,"Genre"),e.qZA(),e.TgZ(17,"select",15,16),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.game.idGenre=i}),e.YNc(19,te,2,2,"option",17),e.qZA(),e.qZA(),e.YNc(20,ne,2,0,"div",13),e.TgZ(21,"div",9),e.TgZ(22,"label",18),e._uU(23,"Publisher"),e.qZA(),e.TgZ(24,"select",19,20),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.game.idPublisher=i}),e.YNc(26,re,2,2,"option",17),e.qZA(),e.qZA(),e.YNc(27,oe,2,0,"div",13),e.TgZ(28,"div",9),e.TgZ(29,"label",21),e._uU(30,"Price"),e.qZA(),e.TgZ(31,"input",22,23),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.game.price=i}),e.qZA(),e.qZA(),e.YNc(33,ie,2,0,"div",13),e.TgZ(34,"div",9),e.TgZ(35,"label",24),e._uU(36,"Developer"),e.qZA(),e.TgZ(37,"select",25,26),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.game.idDeveloper=i}),e.YNc(39,se,2,2,"option",17),e.qZA(),e.qZA(),e.YNc(40,ae,2,0,"div",13),e.TgZ(41,"div",9),e.TgZ(42,"label",27),e._uU(43,"Release Date"),e.qZA(),e.TgZ(44,"input",28),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.game.releaseDate=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",29),e.TgZ(46,"input",30),e.NdJ("change",function(i){return e.CHM(t),e.oxw().onFileSelected(i)}),e.qZA(),e.YNc(47,ce,1,1,"img",31),e.YNc(48,le,1,1,"img",31),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(1),r=e.MAs(12),i=e.MAs(18),s=e.MAs(25),a=e.MAs(32),d=e.MAs(38),p=e.oxw();e.xp6(11),e.Q6J("ngModel",p.model.game.title),e.xp6(2),e.Q6J("ngIf",p.checkShowValidationError(r,t)),e.xp6(4),e.Q6J("ngModel",p.model.game.idGenre),e.xp6(2),e.Q6J("ngForOf",p.model.genres),e.xp6(1),e.Q6J("ngIf",p.checkShowValidationError(i,t)),e.xp6(4),e.Q6J("ngModel",p.model.game.idPublisher),e.xp6(2),e.Q6J("ngForOf",p.model.companies),e.xp6(1),e.Q6J("ngIf",p.checkShowValidationError(s,t)),e.xp6(4),e.Q6J("ngModel",p.model.game.price),e.xp6(2),e.Q6J("ngIf",p.checkShowValidationError(a,t)),e.xp6(4),e.Q6J("ngModel",p.model.game.idDeveloper),e.xp6(2),e.Q6J("ngForOf",p.model.companies),e.xp6(1),e.Q6J("ngIf",p.checkShowValidationError(d,t)),e.xp6(4),e.Q6J("ngModel",p.model.game.releaseDate),e.xp6(3),e.Q6J("ngIf",p.imagePreview),e.xp6(1),e.Q6J("ngIf",p.model&&p.model.game.image&&!p.imagePreview)}}let ge=(()=>{class n{constructor(t,r,i,s,a){this.gameService=t,this.activatedRoute=r,this.commonService=i,this.localeService=s,this.router=a,this.errorMessage=""}ngOnInit(){(0,O.Wf)("hr",O.cb),this.localeService.use("hr"),this.gameService.getEditModel(+this.activatedRoute.snapshot.params.id).subscribe(r=>{this.model=r,this.model.game.releaseDate=r.game.releaseDate?new Date(r.game.releaseDate):new Date},r=>this.errorMessage=this.commonService.getError(r))}checkShowValidationError(t,r){return t.invalid&&(t.dirty||t.touched||r.submitted)}onSubmit(){var t,r,i,s;const a=new FormData,d=this.model.game;a.append("title",d.title),a.append("id",d.id.toString()),a.append("idGenre",(null===(t=d.idGenre)||void 0===t?void 0:t.toString())||""),a.append("idDeveloper",(null===(r=d.idDeveloper)||void 0===r?void 0:r.toString())||""),a.append("idPublisher",(null===(i=d.idPublisher)||void 0===i?void 0:i.toString())||""),a.append("price",(null===(s=d.price)||void 0===s?void 0:s.toString())||""),a.append("releaseDate",d.releaseDate?(0,W.Z)(d.releaseDate,"yyyy-MM-dd"):""),a.append("image",d.image),this.selectedFile&&a.append("uploadedImage",this.selectedFile,this.selectedFile.name),(d.id>0?()=>this.gameService.update(a):()=>this.gameService.create(a))().subscribe(()=>this.router.navigate(["admin"]),p=>this.errorMessage=this.commonService.getError(p))}goBack(){this.router.navigate(["admin"])}onFileSelected(t){if(this.selectedFile=t.target.files[0],this.selectedFile){const r=new FileReader;r.onload=i=>this.imagePreview=r.result,r.readAsDataURL(this.selectedFile)}}getGameImage(){return this.model&&this.model.game.image?`/assets/gameimages/${this.model.game.image}`:null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(u.gz),e.Y36(_),e.Y36(y.vL),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-game-detail"]],decls:4,vars:2,consts:[[1,"container"],[3,"errorMessage"],["class","mt-2",3,"ngSubmit",4,"ngIf"],[1,"mt-2",3,"ngSubmit"],["frm","ngForm"],["type","submit",1,"btn","btn-primary"],["type","button",1,"ml-2","btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModel","ngModelChange"],["title","ngModel"],["class","form-text text-danger mb-2",4,"ngIf"],["for","idGenre"],["id","idGenre","name","idGenre","required","",1,"form-control",3,"ngModel","ngModelChange"],["idGenre","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","idPublisher"],["id","idPublisher","name","idPublisher","required","",1,"form-control",3,"ngModel","ngModelChange"],["idPublisher","ngModel"],["for","price"],["type","number","id","price","name","price","required","",1,"form-control",3,"ngModel","ngModelChange"],["price","ngModel"],["for","idDeveloper"],["id","idDeveloper","name","idDeveloper","required","",1,"form-control",3,"ngModel","ngModelChange"],["idDeveloper","ngModel"],["for","releaseDate"],["type","text","id","releaseDate","name","releaseDate","bsDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-6","d-flex","flex-column"],["type","file",3,"change"],[3,"src",4,"ngIf"],[1,"form-text","text-danger","mb-2"],[3,"value"],[3,"src"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header"),e._UZ(2,"app-errormessage",1),e.YNc(3,pe,49,16,"form",2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("errorMessage",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.model))},directives:[T,l.H1,m.O5,c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,c.EJ,m.sg,c.wV,y.Y5,y.Np,c.YN,c.Kr],styles:["img[_ngcontent-%COMP%]{width:250px}"]}),n})();class me{}let de=(()=>{class n{constructor(){this.text="",this.SearchActivated=new e.vpe}ngOnInit(){}search(){this.SearchActivated.emit(this.text)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search-bar"]],outputs:{SearchActivated:"SearchActivated"},decls:4,vars:1,consts:[[1,"mt-2","d-flex"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","ml-2",2,"width","100px",3,"click"],[1,"fas","fa-search"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"input",1),e.NdJ("ngModelChange",function(s){return r.text=s}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return r.search()}),e._UZ(3,"i",3),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngModel",r.text))},directives:[c.Fj,c.JJ,c.On],styles:[""]}),n})(),ue=(()=>{class n{constructor(){this.filter={from:0,to:200},this.FilterSubmitted=new e.vpe}ngOnInit(){}filterProducts(){this.FilterSubmitted.emit(this.filter)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-price-filter"]],outputs:{FilterSubmitted:"FilterSubmitted"},decls:14,vars:2,consts:[[1,"card","mt-4"],[1,"card-header","header"],[1,"card-body"],[1,"form-group"],["for","priceFrom"],["type","number","id","priceFrom",1,"form-control",3,"ngModel","ngModelChange"],["for","priceTo"],["type","number","id","priceTo",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2,"Cijena od-do"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"label",4),e._uU(6,"Od"),e.qZA(),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(s){return r.filter.from=s}),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"label",6),e._uU(10,"Do"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(s){return r.filter.to=s}),e.qZA(),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.filterProducts()}),e._uU(13,"Filtriraj"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngModel",r.filter.from),e.xp6(4),e.Q6J("ngModel",r.filter.to))},directives:[c.wV,c.Fj,c.JJ,c.On],styles:[""]}),n})();function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"a",5),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onGenreSelected(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}let he=(()=>{class n{constructor(){this.GenreSelected=new e.vpe}ngOnInit(){}onGenreSelected(t){this.GenreSelected.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genre-selector"]],inputs:{genres:"genres"},outputs:{GenreSelected:"GenreSelected"},decls:5,vars:1,consts:[[1,"card","mt-4"],[1,"card-header","header"],[1,"card-body"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[2,"cursor","pointer",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2,"\u017danr"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,_e,3,1,"div",3),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",r.genres))},directives:[m.sg],styles:["a[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{font-size:1.1em}.header[_ngcontent-%COMP%]{font-weight:bold}"]}),n})();function fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"a",5),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onCompanySelected(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}let Ze=(()=>{class n{constructor(){this.CompanySelected=new e.vpe}ngOnInit(){}onCompanySelected(t){this.CompanySelected.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-company-selector"]],inputs:{companies:"companies"},outputs:{CompanySelected:"CompanySelected"},decls:5,vars:1,consts:[[1,"card","mt-4"],[1,"card-header","header"],[1,"card-body"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[2,"cursor","pointer",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2,"Developer / Izdava\u010d"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,fe,3,1,"div",3),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",r.companies))},directives:[m.sg],styles:["a[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{font-size:1.1em}.header[_ngcontent-%COMP%]{font-weight:bold}"]}),n})();var F=g(2492);let ve=(()=>{class n{constructor(){this.AddedToCart=new e.vpe}ngOnInit(){}getImageUrl(t){return`assets/gameimages/${t.image}`}getImageUrlBg(t){return`background: url("assets/gameimages/${t.image}") center center / 100% 150px no-repeat;`}addToCart(){this.AddedToCart.emit(this.game)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-game-list-element"]],inputs:{game:"game"},outputs:{AddedToCart:"AddedToCart"},decls:12,vars:4,consts:[[1,"game_element"],[1,"imageHolder"],["href","#"],[1,"title"],[1,"pricecart","mb-2"],[1,"price"],[1,"cart","ml-2","mr-2"],[2,"cursor","pointer",3,"click"],["src","assets/cart-add-icon.png"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"a",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"a",2),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"a",7),e.NdJ("click",function(){return r.addToCart()}),e._UZ(11,"img",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Akn(r.getImageUrlBg(r.game)),e.xp6(4),e.Oqu(r.game.title),e.xp6(3),e.hij(" \u20ac",r.game.price," "))},styles:[".imageHolder[_ngcontent-%COMP%]{height:150px}.title[_ngcontent-%COMP%]{text-align:center;margin-top:15px;padding:5px}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa}.pricecart[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.price[_ngcontent-%COMP%]{font-size:1.2em;font-weight:bold}.game_element[_ngcontent-%COMP%]{position:relative;z-index:0;height:16rem;display:flex;flex-direction:column;background:rgb(255,255,255);margin:auto;border-radius:1.6rem;overflow:hidden;transition:all .2s ease-in-out 0s;max-width:16rem;width:150px;transform:translate(0);justify-content:space-between}"]}),n})();function Ce(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"pagination",7),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().page=i})("pageChanged",function(i){return e.CHM(t),e.oxw().pageChanged(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.page)("totalItems",t.games.length)}}function Te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"app-game-list-element",9),e.NdJ("AddedToCart",function(i){return e.CHM(t),e.oxw().onAddedToCart(i)}),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("game",t)}}function Me(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"pagination",7),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().page=i})("pageChanged",function(i){return e.CHM(t),e.oxw().pageChanged(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.page)("totalItems",t.games.length)}}let Ae=(()=>{class n{constructor(t){this.cartService=t,this.page=1,this.pageSize=12}get games(){return this._games}set games(t){this._games=t,t&&(this.pagedGames=t.length>this.pageSize?t.slice(0,this.pageSize):t)}ngOnInit(){}pageChanged(t){this.page=t.page;const r=(this.page-1)*this.pageSize;this.pagedGames=this.games.slice(r,Math.min(r+this.pageSize,this.games.length))}onAddedToCart(t){this.cartService.add(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-game-list"]],inputs:{games:"games"},decls:9,vars:3,consts:[[1,"gamelistcontainer"],[1,"mt-4","row"],[1,"col-12"],[3,"ngModel","totalItems","ngModelChange","pageChanged",4,"ngIf"],[1,"row","games"],["class","col-3 games",4,"ngFor","ngForOf"],[1,"row"],[3,"ngModel","totalItems","ngModelChange","pageChanged"],[1,"col-3","games"],[3,"game","AddedToCart"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ce,1,2,"pagination",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,Te,2,1,"div",5),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",2),e.YNc(8,Me,1,2,"pagination",3),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",r.pagedGames&&r.games&&r.games.length>r.pageSize),e.xp6(2),e.Q6J("ngForOf",r.pagedGames),e.xp6(3),e.Q6J("ngIf",r.pagedGames&&r.games&&r.games.length>r.pageSize))},directives:[m.O5,m.sg,F.Qt,c.JJ,c.On,ve],styles:[".games[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.gamelistcontainer[_ngcontent-%COMP%]{padding:10px}"]}),n})();function Se(n,o){if(1&n&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-genre-selector",12),e.NdJ("GenreSelected",function(i){return e.CHM(t),e.oxw().onGenreSelected(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("genres",t.homeModel.genres)}}function xe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-company-selector",13),e.NdJ("CompanySelected",function(i){return e.CHM(t),e.oxw().onCompanySelected(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("companies",t.homeModel.companies)}}function ye(n,o){if(1&n&&e._UZ(0,"app-game-list",14),2&n){const t=e.oxw();e.Q6J("games",t.games)}}let be=(()=>{class n{constructor(t,r){this.gameService=t,this.commonService=r,this.homeModel=new me,this.errorMessage=""}ngOnInit(){this.gameService.getGenres().subscribe(t=>this.homeModel.genres=t),this.gameService.getCompanies().subscribe(t=>this.homeModel.companies=t)}onGenreSelected(t){this.gameService.getByGenre(t.id).subscribe(r=>this.games=r,r=>this.errorMessage=this.commonService.getError(r))}onCompanySelected(t){this.gameService.getByCompany(t.id).subscribe(r=>this.games=r,r=>this.errorMessage=this.commonService.getError(r))}onSearch(t){this.gameService.search(t).subscribe(r=>this.games=r,r=>this.errorMessage=this.commonService.getError(r))}onFilterSubmitted(t,r){this.gameService.filterByPrices(t,r).subscribe(i=>this.games=i,i=>this.errorMessage=this.commonService.getError(i))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],decls:13,vars:4,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],[3,"SearchActivated"],[1,"main"],[1,"sidebar"],[3,"genres","GenreSelected",4,"ngIf"],[1,"mt-2"],[3,"companies","CompanySelected",4,"ngIf"],[3,"FilterSubmitted"],[1,"content","mt-4"],[3,"games",4,"ngIf"],[1,"alert","alert-danger"],[3,"genres","GenreSelected"],[3,"companies","CompanySelected"],[3,"games"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header"),e.YNc(2,Se,2,1,"div",1),e.TgZ(3,"app-search-bar",2),e.NdJ("SearchActivated",function(s){return r.onSearch(s)}),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.YNc(6,qe,1,1,"app-genre-selector",5),e.TgZ(7,"div",6),e.YNc(8,xe,1,1,"app-company-selector",7),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"app-price-filter",8),e.NdJ("FilterSubmitted",function(s){return r.onFilterSubmitted(s.from,s.to)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.YNc(12,ye,1,1,"app-game-list",10),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",r.errorMessage),e.xp6(4),e.Q6J("ngIf",r.homeModel),e.xp6(2),e.Q6J("ngIf",r.homeModel),e.xp6(4),e.Q6J("ngIf",r.games))},directives:[T,m.O5,de,ue,he,Ze,Ae],styles:[""]}),n})();class we{}class w{}let U=(()=>{class n{constructor(t){this.httpService=t,this.api="api/order/"}create(t){return this.httpService.post(this.api,t)}getForUser(t){return this.httpService.get(`${this.api}forUser/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),N=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-edit"]],inputs:{user:"user"},decls:20,vars:6,consts:[[1,"form-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"label"),e._uU(2,"Firstname:"),e.qZA(),e.TgZ(3,"input",1),e.NdJ("ngModelChange",function(s){return r.user.firstname=s}),e.qZA(),e.qZA(),e.TgZ(4,"div",0),e.TgZ(5,"label"),e._uU(6,"Lastname:"),e.qZA(),e.TgZ(7,"input",1),e.NdJ("ngModelChange",function(s){return r.user.lastname=s}),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"label"),e._uU(10,"Address:"),e.qZA(),e.TgZ(11,"input",1),e.NdJ("ngModelChange",function(s){return r.user.address=s}),e.qZA(),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"label"),e._uU(14,"City:"),e.qZA(),e.TgZ(15,"input",1),e.NdJ("ngModelChange",function(s){return r.user.city=s}),e.qZA(),e.qZA(),e.TgZ(16,"div",0),e.TgZ(17,"label"),e._uU(18,"Email:"),e.qZA(),e.TgZ(19,"input",2),e.NdJ("ngModelChange",function(s){return r.user.email=s}),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngModel",r.user.firstname),e.xp6(4),e.Q6J("ngModel",r.user.lastname),e.xp6(4),e.Q6J("ngModel",r.user.address),e.xp6(4),e.Q6J("ngModel",r.user.city),e.xp6(4),e.Q6J("disabled",r.user.id>0)("ngModel",r.user.email))},directives:[c.Fj,c.JJ,c.On],styles:[""]}),n})();function Ue(n,o){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function Je(n,o){if(1&n&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.successMessage)}}function Ie(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"input",15),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.qty=i})("change",function(){const s=e.CHM(t).$implicit;return e.oxw().onQtyChanged(s)}),e.qZA(),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"button",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().removeItem(s)}),e._uU(13,"Remove"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit,r=o.index;e.xp6(2),e.hij("",r+1,"."),e.xp6(2),e.Oqu(t.game.title),e.xp6(2),e.Oqu(t.game.price),e.xp6(2),e.Q6J("ngModel",t.qty),e.xp6(2),e.Oqu(t.game.price*t.qty)}}function ke(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"h5"),e._uU(2,"Customer info"),e.qZA(),e._UZ(3,"app-user-edit",17),e.TgZ(4,"div",3),e.TgZ(5,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().order()}),e._uU(6,"Finish order"),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("user",t.user)}}let Oe=(()=>{class n{constructor(t,r,i,s){this.orderService=t,this.commonService=r,this.cartService=i,this.userService=s,this.errorMessage="",this.successMessage="",this.user=this.userService.User||new w}ngOnInit(){this.items=this.cartService.items}getTotal(){return this.items.map(t=>t.qty*t.game.price).reduce((t,r)=>t+r,0)}removeItem(t){this.cartService.remove(t.game.id)}onQtyChanged(t){this.cartService.save()}order(){const t=new we;t.user=this.user,t.user.id&&(t.idUser=t.user.id),t.details=this.items.map(r=>({idGame:r.game.id,quantity:r.qty,unitprice:r.game.price,id:0,idOrder:0})),this.orderService.create(t).subscribe(()=>{this.successMessage="Order successfully created",this.cartService.clear()},r=>this.errorMessage=this.commonService.getError(r))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U),e.Y36(_),e.Y36(q),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:33,vars:7,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"mt-2"],[1,"mt-2","row"],[1,"col-sm-8"],[1,"table","table-striped"],[2,"width","40%"],[2,"width","15%"],[4,"ngFor","ngForOf"],["colspan","4",1,"text-right"],[1,"col-sm-4"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["type","number","min","1",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"user"],[1,"btn","btn-lg","btn-success",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header"),e.YNc(2,Ue,2,1,"div",1),e.YNc(3,Je,2,1,"div",2),e.TgZ(4,"h4",3),e._uU(5,"Your shopping cart"),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"table",6),e.TgZ(9,"thead"),e.TgZ(10,"tr"),e._UZ(11,"th"),e.TgZ(12,"th",7),e._uU(13,"Game"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Price"),e.qZA(),e.TgZ(16,"th",8),e._uU(17,"Qty"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Total"),e.qZA(),e._UZ(20,"th"),e.qZA(),e.qZA(),e.TgZ(21,"tbody"),e.YNc(22,Ie,14,5,"tr",9),e.qZA(),e.TgZ(23,"tfoot"),e.TgZ(24,"tr"),e.TgZ(25,"td",10),e._uU(26,"Total:"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"number"),e.qZA(),e._UZ(30,"td"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",11),e.YNc(32,ke,7,1,"ng-container",12),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(19),e.Q6J("ngForOf",r.items),e.xp6(6),e.Oqu(e.lcZ(29,5,r.getTotal())),e.xp6(4),e.Q6J("ngIf",r.items.length>0))},directives:[T,m.O5,m.sg,c.qQ,c.wV,c.Fj,c.JJ,c.On,N],pipes:[m.JJ],styles:[""]}),n})();function Fe(n,o){if(1&n&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.successMessage)}}function Ne(n,o){1&n&&(e.TgZ(0,"div",24),e._uU(1,"Firstname is required "),e.qZA())}function Ge(n,o){1&n&&(e.TgZ(0,"div",24),e._uU(1,"Lastname is required "),e.qZA())}function Le(n,o){1&n&&(e.TgZ(0,"div",24),e._uU(1,"Email is required "),e.qZA())}function Qe(n,o){1&n&&(e.TgZ(0,"div",24),e._uU(1,"Password is required "),e.qZA())}function Pe(n,o){1&n&&(e.TgZ(0,"div",24),e._uU(1,"Password is required "),e.qZA())}let De=(()=>{class n{constructor(t,r,i){this.router=t,this.userService=r,this.commonService=i,this.errorMessage="",this.successMessage="",this.user=new w,this.retypePass=""}ngOnInit(){}onSubmit(){this.user.password!=this.retypePass?this.errorMessage="Passwords don't match":this.userService.registerUser(this.user).subscribe(()=>{this.successMessage="Successfully registered",this.errorMessage="",setTimeout(()=>this.router.navigate([""]),1e3)},t=>this.errorMessage=this.commonService.getError(t))}goBack(){this.router.navigate([""])}checkShowValidationError(t,r){return t.invalid&&(t.dirty||t.touched||r.submitted)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(v),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:50,vars:21,consts:[[1,"container"],[3,"showCart","showLoginInfo"],[3,"errorMessage"],["class","alert alert-success",4,"ngIf"],[3,"ngSubmit"],["frm","ngForm"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-info","ml-2",3,"click"],[1,"form-group","mt-2"],["type","text","name","firstname",1,"form-control",3,"ngModel","required","ngModelChange"],["firstname","ngModel"],["class","form-text text-danger mb-2",4,"ngIf"],[1,"form-group"],["type","text","name","lastname",1,"form-control",3,"ngModel","required","ngModelChange"],["lastname","ngModel"],["type","text","name","address",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","city",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","email",1,"form-control",3,"ngModel","required","ngModelChange"],["email","ngModel"],["type","password","name","password",1,"form-control",3,"ngModel","required","ngModelChange"],["password","ngModel"],["type","password","name","retype",1,"form-control",3,"ngModel","required","ngModelChange"],["retype","ngModel"],[1,"alert","alert-success"],[1,"form-text","text-danger","mb-2"]],template:function(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"app-header",1),e.TgZ(2,"h4"),e._uU(3,"User registration"),e.qZA(),e._UZ(4,"app-errormessage",2),e.YNc(5,Fe,2,1,"div",3),e.TgZ(6,"form",4,5),e.NdJ("ngSubmit",function(){return e.CHM(i),e.MAs(7).form.valid&&r.onSubmit()}),e.TgZ(8,"button",6),e._uU(9,"Submit"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return r.goBack()}),e._uU(11,"Go back"),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"label"),e._uU(14,"Firstname:"),e.qZA(),e.TgZ(15,"input",9,10),e.NdJ("ngModelChange",function(a){return r.user.firstname=a}),e.qZA(),e.qZA(),e.YNc(17,Ne,2,0,"div",11),e.TgZ(18,"div",12),e.TgZ(19,"label"),e._uU(20,"Lastname:"),e.qZA(),e.TgZ(21,"input",13,14),e.NdJ("ngModelChange",function(a){return r.user.lastname=a}),e.qZA(),e.qZA(),e.YNc(23,Ge,2,0,"div",11),e.TgZ(24,"div",12),e.TgZ(25,"label"),e._uU(26,"Address:"),e.qZA(),e.TgZ(27,"input",15),e.NdJ("ngModelChange",function(a){return r.user.address=a}),e.qZA(),e.qZA(),e.TgZ(28,"div",12),e.TgZ(29,"label"),e._uU(30,"City:"),e.qZA(),e.TgZ(31,"input",16),e.NdJ("ngModelChange",function(a){return r.user.city=a}),e.qZA(),e.qZA(),e.TgZ(32,"div",12),e.TgZ(33,"label"),e._uU(34,"Email:"),e.qZA(),e.TgZ(35,"input",17,18),e.NdJ("ngModelChange",function(a){return r.user.email=a}),e.qZA(),e.qZA(),e.YNc(37,Le,2,0,"div",11),e.TgZ(38,"div",12),e.TgZ(39,"label"),e._uU(40,"Password:"),e.qZA(),e.TgZ(41,"input",19,20),e.NdJ("ngModelChange",function(a){return r.user.password=a}),e.qZA(),e.qZA(),e.YNc(43,Qe,2,0,"div",11),e.TgZ(44,"div",12),e.TgZ(45,"label"),e._uU(46,"Retype password:"),e.qZA(),e.TgZ(47,"input",21,22),e.NdJ("ngModelChange",function(a){return r.retypePass=a}),e.qZA(),e.qZA(),e.YNc(49,Pe,2,0,"div",11),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(7),s=e.MAs(16),a=e.MAs(22),d=e.MAs(36),p=e.MAs(42),Ve=e.MAs(48);e.xp6(1),e.Q6J("showCart",!1)("showLoginInfo",!1),e.xp6(3),e.Q6J("errorMessage",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(10),e.Q6J("ngModel",r.user.firstname)("required",!0),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(s,i)),e.xp6(4),e.Q6J("ngModel",r.user.lastname)("required",!0),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(a,i)),e.xp6(4),e.Q6J("ngModel",r.user.address),e.xp6(4),e.Q6J("ngModel",r.user.city),e.xp6(4),e.Q6J("ngModel",r.user.email)("required",!0),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(d,i)),e.xp6(4),e.Q6J("ngModel",r.user.password)("required",!0),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(p,i)),e.xp6(4),e.Q6J("ngModel",r.retypePass)("required",!0),e.xp6(2),e.Q6J("ngIf",r.checkShowValidationError(Ve,i))}},directives:[T,l.H1,m.O5,c._Y,c.JL,c.F,c.Fj,c.JJ,c.On,c.Q7],styles:[""]}),n})();function Ye(n,o){if(1&n&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.successMessage)}}let Ee=(()=>{class n{constructor(t,r){this.userService=t,this.commonService=r,this.errorMessage="",this.successMessage="",this.user=t.User||new w}ngOnInit(){}update(){this.userService.updateUser(this.user).subscribe(()=>{this.userService.saveUser(this.user),this.successMessage="User data successfully updated",setTimeout(()=>this.successMessage="",1e3)},t=>this.errorMessage=this.commonService.getError(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-profile"]],decls:7,vars:4,consts:[[3,"errorMessage"],["class","alert alert-success",4,"ngIf"],[1,"mt-2","mb-2"],[1,"btn","btn-success",3,"click"],[3,"user"],[1,"alert","alert-success"]],template:function(t,r){1&t&&(e.TgZ(0,"app-errormessage",0),e._uU(1),e.qZA(),e.YNc(2,Ye,2,1,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.update()}),e._uU(5,"Update"),e.qZA(),e.qZA(),e._UZ(6,"app-user-edit",4)),2&t&&(e.Q6J("errorMessage",r.errorMessage),e.xp6(1),e.Oqu(r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(4),e.Q6J("user",r.user))},directives:[l.H1,m.O5,N],styles:[""]}),n})(),He=(()=>{class n{constructor(t,r,i){this.orderService=t,this.commonService=r,this.userService=i,this.orders=[],this.errorMessage="",this.definition=new l.gw([new l.C4("Date ordered","dateOrdered",l.tg.Label,"dateordered"),new l.C4("Date sent","dateSent",l.tg.Label,"dateSent"),new l.C4("No. of games","count",l.tg.Label,"count"),new l.C4("Total","total",l.tg.Label,"total")])}ngOnInit(){this.definition.columns[0].dataType=l.hy.Date,this.definition.columns[0].format={format:"dd.MM.yyyy HH:mm"},this.definition.columns[1].dataType=l.hy.Date,this.definition.columns[1].format={format:"dd.MM.yyyy HH:mm"};const t=this.userService.User;t&&this.orderService.getForUser(t.id).subscribe(r=>this.orders=r.map(i=>({id:i.id,dateOrdered:i.dateOrdered?new Date(i.dateOrdered):null,dateSent:i.dateSent?new Date(i.dateSent):null,total:this.computeTotal(i),count:i.details.length})),r=>this.errorMessage=this.commonService.getError(r))}computeTotal(t){return t.details?t.details.map(r=>(r.unitprice||0)*(r.quantity||0)).reduce((r,i)=>r+i,0):0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U),e.Y36(_),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-my-orders"]],decls:3,vars:3,consts:[[3,"errorMessage"],[1,"mt-2"],[3,"definition","data"]],template:function(t,r){1&t&&(e._UZ(0,"app-errormessage",0),e.TgZ(1,"div",1),e._UZ(2,"app-grid",2),e.qZA()),2&t&&(e.Q6J("errorMessage",r.errorMessage),e.xp6(2),e.Q6J("definition",r.definition)("data",r.orders))},directives:[l.H1,l.Mw],styles:[""]}),n})();const Be=[{path:"",component:be},{path:"game/:id",component:ge},{path:"admin/games",component:k},{path:"login",component:K},{path:"admin",component:X},{path:"cart",component:Oe},{path:"register",component:De},{path:"userdetails",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-details"]],decls:8,vars:0,consts:[[1,"container"],[1,"mt-2"],["heading","Profile"],["heading","Orders"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header"),e.TgZ(2,"div",1),e.TgZ(3,"tabset"),e.TgZ(4,"tab",2),e._UZ(5,"app-user-profile"),e.qZA(),e.TgZ(6,"tab",3),e._UZ(7,"app-my-orders"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},directives:[T,S.AH,S.wW,Ee,He],styles:[""]}),n})()}];let Re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forRoot(Be)],u.Bz]}),n})(),ze=(()=>{class n{constructor(){this.title="gameshopApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),n})();class $e{constructor(){}intercept(o,t){const r=localStorage.getItem(C.accessTokenKey);return t.handle(this.addAuthorizationHeader(o,r))}addAuthorizationHeader(o,t){return t?o.clone({setHeaders:{Authorization:`Bearer ${t}`}}):o}}var Xe=g(6237);let je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n,bootstrap:[ze]}),n.\u0275inj=e.cJS({providers:[x,A,J,M.eN,_,q,v,U,{provide:M.TP,useClass:$e,multi:!0}],imports:[[Z.b2,Re,c.u5,M.JF,F.u3,l.qs,S.P4.forRoot(),I.UU.forRoot(),Xe.PW,y.kn.forRoot()]]}),n})();(0,e.G48)(),Z.q6().bootstrapModule(je).catch(n=>console.error(n))}},f=>{f.O(0,[736],()=>f(f.s=6561)),f.O()}]);